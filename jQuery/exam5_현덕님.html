<!DOCTYPE html>
<html lang="ko">
<!-- 현덕님  -->
<head>
  <meta charset="UTF-8">
  <title>jQuery 기초9</title>
  <style>
    .container {
      text-align: center;
    }
    table {
      display: inline-block;
    }
    table, tr, th, td {
      border: 1px solid black;
      border-spacing: 0;
    }
  </style>
  <script src="https://code.jquery.com/jquery-3.6.0.js" integrity="sha256-H+K7U5CnXl1h5ywQfKtSj8PCmoN9aaq30gDh27Xc0jk=" crossorigin="anonymous"></script>
</head>

<body>
  <div class="container">
    <table>
      <tr>
        <th><input type="checkbox" class="checkAll" checked="true">확인</th>
        <th>제목</th>
        <th>글쓴시간</th>
      </tr>
      <tr>
        <td><input type="checkbox" class="checkOne"></td>
        <td class="title">1111</td>
        <td class="wDate">11:11:00</td>
      </tr>
      <tr>
        <td><input type="checkbox" class="checkOne"></td>
        <td class="title">2222</td>
        <td class="wDate">11:12:00</td>
      </tr>
      <tr>
        <td><input type="checkbox" class="checkOne"></td>
        <td class="title">3333</td>
        <td class="wDate">11:13:00</td>
      </tr>
      <tr>
        <td><input type="checkbox" class="checkOne"></td>
        <td class="title">4444</td>
        <td class="wDate">11:14:00</td>
      </tr>
      <tr>
        <td><input type="checkbox" class="checkOne"></td>
        <td class="title">5555</td>
        <td class="wDate">11:15:00</td>
      </tr>
      <tr>
        <td><input type="checkbox" class="checkOne" checked="false"></td>
        <td class="title">6666</td>
        <td class="wDate">11:16:00</td>
      </tr>
    </table>
    <br>
    <br>
    <button class="btn">로그</button>
  </div>

  <script>
    ////###############
    //1. 제이쿼리 사용하려면 꼭 $(function() { }); 안에 넣기
    $(function() {
      //2.
      // 전체 체크에 따른 단일 체크 제어
      //class 가 checkAll인 태그를 클릭하면 함수 작동
      $('.checkAll').click(function() {
        $('.checkOne').prop('checked', this.checked);       //이것 좋은 코드
          //전체체크 클릭시 단일 체크박스의 속성 중 checked의 속성 조회 -> this는 .checkAll
          //.checkAll의 속성으로 변경한다.
          //즉, .checkAll(전체체크박스)가 클릭된 상태라면, 단일 체크박스도 체크로 변경
          //.checkAll(전체체크박스)가 클릭해제 된 상태라면, 단일 체크박스도 체크해제
      });

      //3.
      //이건 거의 정해진 룰이다.
      // 단일 체크에 따른 전체 체크 제어 _ 2번 과정이 전체체크버튼으로 단일 체크버튼 속성을 변경한거고, 단일체크개수와 전체체크 개수를 맞춰주는 것.
      $(".checkOne").click(function() {     //한개의 체크박스를 체크하면
        if ($('.checkOne:checked').length === $('.checkOne').length) {      
          //한개 체크된 체크박스 개수가 단일  체크박스 개수와 같다면 = 단일박스가 모두 체크된 상태라면

          $('.checkAll').prop('checked', true);     //확인옆 전체체크박스를 활성화=> 전체체크
        } else {
          $('.checkAll').prop('checked', false);    //아니라면, 전체체크해제
        }
      });

      //3.
      // 체크한 제목 로그 찍기
      $(".btn").click(function() {        //로그버튼 클릭하면
        $('.checkOne:checked').each(function() {        //개별체크버튼이 
          console.log($(this).parent().next().text());      
          //jquery로 주변 함수로 가는 것이 쉽다_ next로 다음으로 간다.  _ 
          //this는 .checkOne:checked를 지칭
          //.checkOne:checked의 parent는 td다. td안에 들어있기 때믄!!!!!
          //next()로 2열의 td로 이동
          //text() 2열의 내용 읽어오기.

          //3-2. jQuery로 주변 값 가져오는 다른 방법들 _ tr부터 children으로 타고 내려오는 방법도 있다.
          //console.log($(this).closest("tr").children('.title').text());   // closest() - 부모 중 조건에 해당하는 가장 가까운 요소
          //console.log($(this).parent().parent().children('td:eq(1)').text());
          //console.log($(this).parents().children('td:eq(1)').text());           //eq는 인덱스를 지칭한다.
        });
      });
    });
  </script>
</body>

</html>